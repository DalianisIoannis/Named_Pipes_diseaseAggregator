
int worker_run(input_dir, bufferSize) {

    int rfd, wfd;

    wfd = open("read_getpid()");
    rfd = open("wirte_getpid()");


    worker_get_countries()
    {
        for ( ;; ) {
            country = read(rfd)

            if (!strcmp(country, "ola telos"))
            {
                break;
            }
            ]
            list = add_country_to_list(country);
        }
        return list;
    }

    // esw germania ellada tourkia
    for (country) {
        for (every date ) {
            while (getline(&line) != -1))
            {
                if (line[1] == "ENTER") {
                    patietn = create_patient();
                    // add patient to list, hashTable for disease and hashTable for countries
                }
                else {
                    // file 20-02-2018.txt
                    // char *date = malloc(strlen(file) + 1)
                    // strcpy(date, file)
                    // strtok(date, ".")
                    // fre
                    patient = find_patient_from_list(id, list) {
                        add_exit_date(patient, date)
                    }
                }
            }
        }

        read hastable gia ta countries, pare date summaries
        send-message(wfd, "statisticks")
    }

    write(wfd, "OK")

    while (1) {
        queery  = read(rfd)

        handle query 
    }

    free()

    exit(succes_code);
}